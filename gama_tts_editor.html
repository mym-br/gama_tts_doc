<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="gama_tts_doc.css">
<link rel="icon" type="image/png" href="gama_tts_icon.png">
<title>GamaTTS - GamaTTS:Editor</title>
</head>

<body>

<div id="page">

<nav>
<ul class="horizontal-menu">
	<li><a class="menu-item" href="index.html">Index</a></li>
	<li><a class="menu-item" href="how_to_use.html">How to use</a></li>
	<li><a class="menu-item" href="contact.html">Contact</a></li>
</ul>
</nav>


<div class="content">
<h1>How to use GamaTTS:Editor</h1>

<ol>
<li><a href="#prep">Preparation</a></li>
<li><a href="#notes">Notes</a></li>
<li><a href="#main_window">Main window</a></li>
<li><a href="#data_entry_cat">Data entry - categories</a></li>
<li><a href="#data_entry_param">Data entry - parameters</a></li>
<li><a href="#data_entry_sym">Data entry - symbols</a></li>
<li><a href="#post_editor_cat">Posture editor - management and categories</a></li>
<li><a href="#post_editor_param">Posture editor - parameters</a></li>
<li><a href="#post_editor_sym">Posture editor - symbols</a></li>
<li><a href="#interactive">Interactive vocal tract model</a></li>
<li><a href="#interactive_analysis">Interactive vocal tract model - analysis</a></li>
<li><a href="#proto_manager_eq">Prototype manager - equations</a></li>
<li><a href="#proto_manager_tran">Prototype manager - transitions</a></li>
<li><a href="#transition_editor">Transition editor</a></li>
<li><a href="#proto_manager_special_tran">Prototype manager - special transitions</a></li>
<li><a href="#special_transition_editor">Special transition editor</a></li>
<li><a href="#rule_manager_expr">Rule manager - expressions</a></li>
<li><a href="#rule_manager_param_trans">Rule manager - transitions</a></li>
<li><a href="#rule_manager_special_param_trans">Rule manager - special parameter transitions</a></li>
<li><a href="#rule_manager_symb_eq">Rule manager - symbol equations</a></li>
<li><a href="#rule_manager_comment">Rule manager - comment</a></li>
<li><a href="#rule_tester">Rule tester</a></li>
<li><a href="#inton_param">Intonation parameters</a></li>
<li><a href="#synth_window">Synthesis window</a></li>
<li><a href="#inton_window">Intonation window</a></li>
<li><a href="#param_modif">Parameter modification</a></li>
</ol>

<hr>
<!-- ======================================================================= -->
<h2 id="prep">Preparation</h2>

<p>The software QJackCtl must be installed. Configure the sample rate to 44100 Hz (this value can be changed in the file <code>vtm.config</code>)
and start QJackCtl.
</p>

<p>Copy the data files contained in the directory <code>data/</code> (from the source package or from <code>/usr/share/gama_tts/data</code>) to another directory.
The user must have write access to this directory.
</p>

<p>Run the program <code>gama_tts_editor</code>.
</p>

<hr>
<!-- ======================================================================= -->
<h2 id="notes">Notes</h2>

<ul>
<li>The times are defined in milliseconds.</li>
<li>In Postures, the Symbols "duration" and "markedDuration" are not being used.</li>
<li>The database must contain the Category "phone", and the Postures "#" and "^".</li>
<li>The number of Symbols and their names must not be changed.</li>
<li>The first vocal tract model parameter must be the pitch.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="main_window">Main window</h2>

<p><img class="screenshot" src="img/gama_tts_editor-main_window.png"
	alt="Screenshot of the main window"></p>

<p>Operations:</p>
<ul>
<li>Open a model:<br>Click on File/Open and select the file <code>artic.xml</code> in the data directory.</li>
<li>Save the model:<br>Click on File/Save.</li>
<li>Save the model to a different file:<br>Click on File/Save as.</li>
<li>Reload the model:<br>Click on File/Reload. All changes are lost. When some
 configuration files are modified, the model must be reloaded manually.</li>
<li>Quit:<br>Click on File/Quit.</li>
<li>Open other windows:<br>Click on the buttons.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="data_entry_cat">Data entry - categories</h2>

<p><img class="screenshot" src="img/gama_tts_editor-data_entry-categories.png"
	alt="Screenshot of the data entry window - categories"></p>

<p>Categories are used to reduce the number of needed rules.
 Postures can be members of a Category.
 A rule can then match a Category instead of many individual Postures.
</p>

<p>The column "Is used?" indicates if the Category is in use.
The number shows how many times it is referenced.
A Category can't be removed if it is in use.
</p>

<p>Operations:</p>
<ul>
<li>Change the name:<br>Double-click on the name, change it and press <kbd>ENTER</kbd>.</li>
<li>Add an item:<br>Select a line (if the table is not empy), click on "Add"
 and the new item will be created after the selected line.
 The name of the new item is "___new___".</li>
<li>Remove the item:<br>Select a line and click on "Remove". The "phone" Category must not be removed.</li>
<li>Move an item up:<br>Select a line and click on "Move up".</li>
<li>Move an item down:<br>Select a line and click on "Move down".</li>
<li>Add/change the comment:<br>Enter the text and click on "Update".</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="data_entry_param">Data entry - parameters</h2>

<p><img class="screenshot" src="img/gama_tts_editor-data_entry-parameters.png"
	alt="Screenshot of the data entry window - parameters"></p>

<p>These are the parameters that will be sent to the vocal tract model.
Each Posture has a set of Parameter values.
</p>

<p>The operations (except changing the comment) are blocked if there is at least
one Posture or one Rule in the database.
</p>

<p>Operations:</p>
<ul>
<li>Change the name or a value:<br>Double-click on the cell, change it and press <kbd>ENTER</kbd>.</li>
<li>Add an item:<br>Select a line (if the table is not empy), click on "Add"
 and the new item will be created after the selected line.
 The name of the new item is "___new___".</li>
<li>Remove the item:<br>Select a line and click on "Remove".</li>
<li>Move an item up:<br>Select a line and click on "Move up".</li>
<li>Move an item down:<br>Select a line and click on "Move down".</li>
<li>Add/change the comment:<br>Enter the text and click on "Update".</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="data_entry_sym">Data entry - symbols</h2>

<p><img class="screenshot" src="img/gama_tts_editor-data_entry-symbols.png"
	alt="Screenshot of the data entry window - symbols"></p>

<p>The Symbols are used by the Postures to indicate their time durations.
</p>

<p>The operations (except changing the comment) are blocked if there is at least
one Posture or one Rule in the database.
The user must not change the number of parameters. Only the minimum, maximum
and default values should be changed.
</p>

<p>Operations:</p>
<ul>
<li>Change the name or a value:<br>Double-click on the cell, change it and press <kbd>ENTER</kbd>.</li>
<li>Add an item:<br>Select a line (if the table is not empy), click on "Add"
 and the new item will be created after the selected line.
 The name of the new item is "___new___".</li>
<li>Remove the item:<br>Select a line and click on "Remove".</li>
<li>Move an item up:<br>Select a line and click on "Move up".</li>
<li>Move an item down:<br>Select a line and click on "Move down".</li>
<li>Add/change the comment:<br>Enter the text and click on "Update".</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="post_editor_cat">Posture editor - management and categories</h2>

<p><img class="screenshot" src="img/gama_tts_editor-posture_editor-categories.png"
	alt="Screenshot of the posture editor - categories"></p>

<p>The Categories are used to make filtering Postures easier.
</p>

<p>Operations:</p>
<ul>
<li>Rename the Posture:<br>Double-click on the cell, change it and press <kbd>ENTER</kbd>.</li>
<li>Add a Posture:<br>Click on "Add". The name of the new item is "###new###".
 The Postures are sorted by the values of the code units (bytes) in the UTF-8 encoding.</li>
<li>Remove a Posture:<br>Select a line in the Posture list and click on "Remove".
 The "#" and "^" Postures must not be removed.</li>
<li>Add/change the comment:<br>Enter the text and click on "Update".</li>
<li>Add the Posture to a Category:<br>Select a line in the Categories table and check the checkbox in the "Is member?" column.
Uncheck to remove the Posture from a Category. The Posture can not be removed from the "phone" Category.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="post_editor_param">Posture editor - parameters</h2>

<p><img class="screenshot" src="img/gama_tts_editor-posture_editor-parameters.png"
	alt="Screenshot of the posture editor - parameters"></p>

<p>The Parameter values are configurations of the vocal tract model that produce the desired sound.
</p>

<p>Parameter values that are different from the default are shown in bold.
</p>

<p>Operations:</p>
<ul>
<li>Change a Parameter value:<br>Double-click on a cell in the "Value" column, change it and press <kbd>ENTER</kbd>.</li>
<li>Use a default Parameter value:<br>Select a line in the Parameters table and click on "Use default".</li>
<li>Copy the Parameter values to the clipboard:<br>Click on "Copy". The values can be copied to the interactive VTM.</li>
<li>Paste the Parameter values from the clipboard:<br>Click on "Paste".
 The format must be the same as the one used by the "Copy" button.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="post_editor_sym">Posture editor - symbols</h2>

<p><img class="screenshot" src="img/gama_tts_editor-posture_editor-symbols.png"
	alt="Screenshot of the posture editor - symbols"></p>

<p>The Symbol values indicate the durations of each phase of the articulation.<br>
 Qssa (quasi steady state A) is the duration of the slow variation phase just before the center of the Posture.<br>
 Qssb (quasi steady state B) is the duration of the slow variation phase just after the center of the Posture.<br>
 Transition is the duration of the fast variation phase before of after the slow variation phases.<br>
 "Duration" is the total duration of the Posture, and is roughly equal to qssa + qssb + transition.<br>
 The symbols with the "marked" prefix are used for marked Postures.
</p>

<p>Symbol values that are different from the default are shown in bold.
</p>

<p>Operations:</p>
<ul>
<li>Change a Symbol value:<br>Double-click on a cell in the "Value" column, change it and press <kbd>ENTER</kbd>.</li>
<li>Use a default Symbol value:<br>Select a line in the Symbols table and click on "Use default".</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="interactive">Interactive vocal tract model</h2>

<p><img class="screenshot" src="img/gama_tts_editor-interactive.png"
	alt="Screenshot of the interactive vocal tract model"></p>

<p>The interactive vocal tract model is used to find a configuration that produces the correct sound of a Posture.
</p>

<p>During the synthesis, the volume is normalized (to avoid clipping), but the gain is only reduced, never increased.
To increase the gain if the sound is well below the threshold for the current configuration, the synthesis must be restarted.
</p>

<p>Dynamic parameters can be changed without a restart. To change static parameters, the synthesis must be restarted.
</p>

<p>Operations:</p>
<ul>
<li>Load the parameter values of a Posture:<br>Select a Posture in the posture editor.</li>
<li>Paste parameter values from the clipboard:<br>Click on "Past dyn. parameters" to use the values copied from the Posture editor.</li>
<li>Copy parameter values to the clipboard:<br>Click on "Copy dyn. parameters" to send the values to the Posture editor.</li>
<li>Start/restart the interactive session:<br>Click on "(Re)start". The synthesis is restarted without reloading the configuration.</li>
<li>Stop the interactive session:<br>Click on "Stop".</li>
<li>Reload the configuration:<br>Click on "Reload Configuration". The configuration files are read and the synthesis is restarted.</li>
<li>Open the analysis window:<br>Click on "Analysis".</li>
<li>Change the dynamic parameters:<br>Move the sliders, or enter the new value in the text input and press <kbd>ENTER</kbd>.</li>
<li>Change the static parameters:<br>Move the sliders, or enter the new value in the text input and press <kbd>ENTER</kbd>.
 Then click on "Apply".
 The synthesis is restarted.</li>
<li>Load dynamic parameters from a file:<br>Click on File/Load Dynamic Parameters.</li>
<li>Save dynamic parameters to a file:<br>Click on File/Save Dynamic Parameters.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="interactive_analysis">Interactive vocal tract model - analysis</h2>

<p><img class="screenshot" src="img/gama_tts_editor-interactive-analysis.png"
	alt="Screenshot of the interactive vocal tract model - analysis window"></p>

<p>This is a simple spectrum/signal viewer. External spectrum viewers can be connected through JACK.
</p>

<p>
</p>

<p>Operations:</p>
<ul>
<li>Change the view:<br>Select "Spectrum" to view the spectrum, and "Signal" to see the time domain waveform.</li>
<li>Start/stop the viewer:<br>Click on "Start" or "Stop".</li>
<li>Change the parameters of the spectrum:<br>Select the window size and window type.</li>
<li>Select the maximum frequency of the spectrum:<br>The graph will show from 0 Hz to the selected frequency.</li>
<li>Select the y-axis scale for the spectrum:<br>Select "Linear" or "Log".</li>
<li>Select the y scale limits:<br>Select the minimum dB level. The graph will show from to the select level to 0 dB,
 if the y-axis is logarithmic.</li>
<li>Change the cursor:<br>Set the frequency in the text input or click on the up/down arrows.
 The cursor will be indicated by a blue vertical line in the graph. The cursor only appears on the spetrum.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="proto_manager_eq">Prototype manager - equations</h2>

<p><img class="screenshot" src="img/gama_tts_editor-prototype_manager-equations.png"
	alt="Screenshot of the prototype manager - equations"></p>

<p>Equations are used to calculate times from the values of Posture symbols.
Qssa1 is the value of qssa for the Posture 1, qssa2 is the value for Posture 2, and so on.
Equations can use constant times too (in milliseconds), if needed.
</p>

<p>The column "Is used?" is read-only and indicates if the Equation is being used and how many times
it is referenced.
</p>

<p>Operations:</p>
<ul>
<li>Add a group:<br>Select an item (if the list is not empty) and click on "Add".
 The name of new group is "___new___" and it is created at the end.</li>
<li>Add an item:<br>Select a group and click on "Add".
 The name of new item is "___new___" and it is created at the end of the group.</li>
<li>Rename a group/item:<br>Double-click on the group/item, change the text and press <kbd>ENTER</kbd>.</li>
<li>Remove a group/item:<br>Select the group or item and click on "Remove".</li>
<li>Move the group/item up:<br>Select the group or item and click on "Move up".</li>
<li>Move the group/item down:<br>Select the group or item and click on "Move down".</li>
<li>Add/change the comment:<br>Select the item, enter the text and click on "Update".</li>
<li>Change the formula:<br>Select the item, enter the formula and click on "Update".</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="proto_manager_tran">Prototype manager - transitions</h2>

<p><img class="screenshot" src="img/gama_tts_editor-prototype_manager-transitions.png"
	alt="Screenshot of the prototype manager - transitions"></p>

<p>Transitions are curves that indicate how a Posture parameter will vary between Postures during an articulation.
</p>

<p>The column "Is used?" is read-only and indicates if the Transition is being used and how many times
it is referenced.
</p>

<p>Operations:</p>
<ul>
<li>Add a group:<br>Select an item (if the list is not empty) and click on "Add".
 The name of new group is "___new___" and it is created at the end.</li>
<li>Add an item:<br>Select a group and click on "Add".
 The name of new item is "___new___" and it is created at the end of the group.</li>
<li>Rename a group/item:<br>Double-click on the group/item, change the text and press <kbd>ENTER</kbd>.</li>
<li>Remove a group/item:<br>Select the group or item and click on "Remove".</li>
<li>Move the group/item up:<br>Select the group or item and click on "Move up".</li>
<li>Move the group/item down:<br>Select the group or item and click on "Move down".</li>
<li>Add/change the comment:<br>Select the item, enter the text and click on "Update".</li>
<li>Edit the Transition:<br>Select the item and click on "Edit".</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="transition_editor">Transition editor</h2>

<p><img class="screenshot" src="img/gama_tts_editor-transition_editor.png"
	alt="Screenshot of the transition editor"></p>

<p>Transitions can be diphone (two Postures), triphone (three Postures) or tetraphone
(four Postures).
</p>

<p>Diphone Transitions have one phase (between Posture 1 and Posture 2),
triphone two (between Posture 1 and Posture 2 and between Posture 2 and Posture 3)
and tetraphone three (between Posture 1 and Posture 2, between Posture 2 and Posture 3 and between Posture 3 and Posture 4).
</p>

<p>The parameter values are linearly interpolated between points.
</p>

<p>In each phase, the point values vary from 0 at the start Posture to 100 at the end Posture.
The parameter value is calculated by:<br>
<code>value = start_value + (start_value - end_value) * (point_value / 100)</code>.
</p>

<p>The point values can be defined manually, or by using slopes.
In a slope group, the effective slopes of each linear segment are proportional to the defined slope values.
This means that the slopes are relative to the other slopes in the group.
The slopes are indicated at the bottom of the graph.
</p>

<p>In this editor, for the calculation of the point times (using the Equations), the following values are set:<br>
qssa / qssb / transition = 100/3 ms<br>
phase duration = 100 ms<br>
mark1 = 100 ms<br>
mark2 = 200 ms<br>
mark3 = 300 ms<br>
total duration = 100 ms (diphone), 200 ms (triphone), 300 ms (tetraphone)
</p>

<p>The points are sorted by type and by time.
</p>

<p>The last point of the Transition is ignored (it is a "phantom" point).
</p>

<p>The modifications in this window are not executed directly on the main Model.
Only when the user clicks on "Update" the changes are sent to the Model.
</p>

<p>Operations:</p>
<ul>
<li>Select the type of the Transition:<br>Select the type in the "Type" combobox.</li>
<li>Add a point:<br>Double click on the graph. The point type is determined by the phase in which the point is created.
 The point is created with absolute time (the time is not defined by an Equation).</li>
<li>Select a point:<br>Click on the graph near the point or select a line in the points table.</li>
<li>Remove a point:<br>Select a point and click on "Remove".</li>
<li>Change the point value:<br>Select a point, double-click on the "Value" column, enter the value and press <kbd>ENTER</kbd>.
 The value can not be changed if the point is the start of a slope, because in this case the slope calculation is what determines the
 value of the point.</li>
<li>Set the point as the start of a slope:<br>Select a point and check the "Has slope?" column.</li>
<li>Set the slope:<br>Select a point, double-click on the "Slope" column, enter the value and press <kbd>ENTER</kbd>.</li>
<li>Set the point time:<br>Select a point and select an Equation in the Equations tree at the right.
 It is not possible to clear the time (go back to absolute time).</li>
<li>Send the changes to the Model:<br>Click on "Update". Any modifications are lost if this operation is not executed.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="proto_manager_special_tran">Prototype manager - special transitions</h2>

<p><img class="screenshot" src="img/gama_tts_editor-prototype_manager-special_transitions.png"
	alt="Screenshot of the prototype manager - special transitions"></p>

<p>Special Transitions are curves that indicate how a Posture parameter will vary between Postures during an articulation.
They are used when the normal Transitions are not flexible enough. Special Transitions are used in some articulations
involving consonants, and in micro-intonation.
</p>

<p>The column "Is used?" is read-only and indicates if the Special Transition is being used and how many times
it is referenced.
</p>

<p>Operations:</p>
<ul>
<li>Add a group:<br>Select an item (if the list is not empty) and click on "Add".
 The name of new group is "___new___" and it is created at the end.</li>
<li>Add an item:<br>Select a group and click on "Add".
 The name of new item is "___new___" and it is created at the end of the group.</li>
<li>Rename a group/item:<br>Double-click on the group/item, change the text and press <kbd>ENTER</kbd>.</li>
<li>Remove a group/item:<br>Select the group or item and click on "Remove".</li>
<li>Move the group/item up:<br>Select the group or item and click on "Move up".</li>
<li>Move the group/item down:<br>Select the group or item and click on "Move down".</li>
<li>Add/change the comment:<br>Select the item, enter the text and click on "Update".</li>
<li>Edit the Special Transition:<br>Select the item and click on "Edit".</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="special_transition_editor">Special transition editor</h2>

<p><img class="screenshot" src="img/gama_tts_editor-special_transition_editor.png"
	alt="Screenshot of the special transition editor"></p>

<p>Special Transitions can be diphone (two Postures), triphone (three Postures) or tetraphone
(four Postures).
</p>

<p>Diphone Special Transitions have one phase (between Posture 1 and Posture 2),
triphone two (between Posture 1 and Posture 2 and between Posture 2 and Posture 3)
and tetraphone three (between Posture 1 and Posture 2, between Posture 2 and Posture 3 and between Posture 3 and Posture 4).
</p>

<p>The parameter values are linearly interpolated between points. The phase is ignored.
</p>

<p>The parameter value during the Special Transition is calculated by:<br>
<code>value = (max_value - min_value) * (point_value / 100)</code>,<br>
where the minimum and maximum values are defined in the Data entry window, Parameters tab.
The value does not depend on the values of Posture parameters.
</p>

<p>The values produced by the Special Transitions are added to the values produced by the normal Transitions.
</p>

<p>In this editor, for the calculation of the point times (using the Equations), the following values are set:<br>
qssa / qssb / transition = 100/3 ms<br>
phase duration = 100 ms<br>
mark1 = 100 ms<br>
mark2 = 200 ms<br>
mark3 = 300 ms<br>
total duration = 100 ms (diphone), 200 ms (triphone), 300 ms (tetraphone)
</p>

<p>The points are sorted by time (the point type is ignored).
</p>

<p>The modifications in this window are not executed directly on the main Model.
Only when the user clicks on "Update" the changes are sent to the Model.
</p>

<p>Operations:</p>
<ul>
<li>Select the type of the Transition:<br>Select the type in the "Type" combobox.</li>
<li>Add a point:<br>Double click on the graph. The point type is determined by the phase in which the point is created.
 The point is created with absolute time (the time is not defined by an Equation).</li>
<li>Select a point:<br>Click on the graph near the point or select a line in the points table.</li>
<li>Remove a point:<br>Select a point and click on "Remove".</li>
<li>Change the point value:<br>Select a point, double-click on the "Value" column, enter the value and press <kbd>ENTER</kbd>.</li>
<li>Set the point time:<br>Select a point and select an Equation in the Equations tree at the right.
 It is not possible to clear the time (go back to absolute time).</li>
<li>Send the changes to the Model:<br>Click on "Update". Any modifications are lost if this operation is not executed.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="rule_manager_expr">Rule manager - expressions</h2>

<p><img class="screenshot" src="img/gama_tts_editor-rule_manager-expressions.png"
	alt="Screenshot of the rule manager - expressions"></p>

<p>Rules are created to select what Transitions and Special Transitions are used for each Posture sequence,
and for each parameter.
</p>

<p>A Rule is selected using its boolean expressions.
A Rule with 2 boolean expressions can match two consecutive Postures (diphone),
a Rule with 3 boolean expressions can match three consecutive Postures (triphone),
and a Rule with 4 boolean expressions can match four consecutive Postures (tetraphone).
Boolean expressions can use Category and Posture names, and boolean operators.
They can also use the "marked" operator to match a marked Posture.
</p>

<p>For a given Posture sequence, the Rules are searched from the first to the last (order is important).
The first matching Rule defines the Transitions and Special Transitions that will be used
for the Posture sequence.
</p>

<p>In the "Total matches" lists, marked Postures are indicated by an apostrophe at the end of the Posture name.
</p>

<p>Operations:</p>
<ul>
<li>Add a Rule:<br>Select a Rule (if the list is not empty), enter two or more boolean expressions and click on "Add".
 The Rule is created before the selected Rule.</li>
<li>Remove a Rule:<br>Select a Rule and click on "Remove".</li>
<li>Move the Rule up:<br>Select a Rule and click on "Move up".</li>
<li>Move the Rule down:<br>Select a Rule and click on "Move down".</li>
<li>Change the boolean expressions:<br>Select a Rule, change the boolean expressions and click on "Update".</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="rule_manager_param_trans">Rule manager - transitions</h2>

<p><img class="screenshot" src="img/gama_tts_editor-rule_manager-parameter_transitions.png"
	alt="Screenshot of the rule manager - parameter transitions"></p>

<p>Operations:</p>
<ul>
<li>Select a Transition for a parameter:<br>Select the parameter and select the Transition on the Transitions tree.
 All parameters must have a Transition assigned to them.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="rule_manager_special_param_trans">Rule manager - special parameter transitions</h2>

<p><img class="screenshot" src="img/gama_tts_editor-rule_manager-special_parameter_transitions.png"
	alt="Screenshot of the rule manager - special parameter transitions"></p>

<p>Operations:</p>
<ul>
<li>Select a Special Transition for a parameter:<br>Select the parameter and select the Special Transition
 on the Special Transitions tree.</li>
 <li>Clear a parameter:<br>Select the parameter and click on "Clear". Special Transitions are optional.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="rule_manager_symb_eq">Rule manager - symbol equations</h2>

<p><img class="screenshot" src="img/gama_tts_editor-rule_manager-symbol_equations.png"
	alt="Screenshot of the rule manager - symbol equations"></p>

<p>The symbol equations define the durations for the Rule.
</p>

<p>Operations:</p>
<ul>
<li>Select an Equation for a symbol:<br>Select the symbol and select the Equation on the Equations tree.</li>
<li>Clear a symbol:<br>Select the symbol and click on "Clear".
 Mark 3 should only used by tetraphone Rules, and Mark 2 should only used by triphone and tetraphone Rules.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="rule_manager_comment">Rule manager - comment</h2>

<p><img class="screenshot" src="img/gama_tts_editor-rule_manager-comment.png"
	alt="Screenshot of the rule manager - comment"></p>

<p>Operations:</p>
<ul>
<li>Add/change the comment:<br>Enter the text and click on "Update".</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="rule_tester">Rule tester</h2>

<p><img class="screenshot" src="img/gama_tts_editor-rule_tester.png"
	alt="Screenshot of the rule tester"></p>

<p>With this window the user can find out what Rule is selected for a given Posture sequence.
</p>

<p>Marked Postures can be indicated by an apostrophe at the end of the Posture name.
</p>

<p>
</p>

<p>Operations:</p>
<ul>
<li>Shift the Postures:<br>Click on "Shift postures left" and the Posture 2 will be moved to Posture 1,
 the Posture 3 will be moved to Posture 2 and so on.</li>
<li>Search for the first matching Rule:<br>Fill the Posture fields and click on "Test".
 Information about the Rule will appear on the window.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="inton_param">Intonation parameters</h2>

<p><img class="screenshot" src="img/gama_tts_editor-intonation_parameters.png"
	alt="Screenshot of the intonation parameters window"></p>

<p>This window controls how the intonation curve is generated.
</p>

<p>Control group:</p>
<ul>
<li>Micro intonation:<br>Intonation generated by Special Transitions.
 It produces fast and localized pitch perturbations, and may not have a small amplitude.</li>
<li>Macro intonation:<br>Intonation with a global effect, generated by a specific intonation code.
The pitch variation is slower than the micro intonation.</li>
<li>Smooth intonation:<br>When enabled, the pitch between intonation points is calculated using cubic interpolation.
 When disabled, the interpolation is linear.</li>
<li>Random intonation:<br>When enabled, a set of intonation parameter values is chosen randomly. Each time a text is synthesized,
the generated intonation may be different from previous executions.</li>
<li>Intonation drift:<br>The drift adds a fluctuation to the pitch.</li>
</ul>

<p>Parameters group:<br>
If the checkbox "Use these parameters" is checked, the intonation will be generated using these parameter values
instead of the parameter values from the configuration files.
</p>

<p>Drift parameters group:<br>
These parameters control the drift generator. The deviation value is not necessarily the maximum amplitude,
because the signal is filtered by a lowpass filter. In other words, it may be necessary to set a deviation value that is
higher than the desired value.
</p>

<p>Operations:</p>
<ul>
<li>Set the parameters:<br>Click on "Update". If this button is not clicked, the changes will not have an effect.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="synth_window">Synthesis window</h2>

<p><img class="screenshot" src="img/gama_tts_editor-synthesis_window.png"
	alt="Screenshot of the synthesis window"></p>

<p>In this window, speech may be synthesized from a text or from a phonetic string (Gnuspeech format).
</p>

<p>Tempo values greater than one speed up the synthesized speech, and vice versa.
</p>

<p>When the checkbox "Save VTM parameters to file" is checked, the vocal tract parameters are saved to the file
<code>generated__vtm_param.txt</code> in the data directory.
</p>

<p>The mouse tracking shows the time and value for the current cursor position in the graph.
</p>

<p>Signals produced using Special Transitions are shown in red.
</p>

<p>Operations:</p>
<ul>
<li>Parse the text and synthesize it:<br>Enter the text in the field "Text" and press <kbd>ENTER</kbd>, or click on "Parse".
 A phonetic string is inserted into the field "Phonetic string".</li>
<li>Synthesize the phonetic string using the saved data:<br>Click on "Reference" and the sound will be sent to JACK audio.
This is useful to compare the (unsaved) modifications with the saved (reference) data.</li>
<li>Synthesize the phonetic string:<br>Click on "Synthesize" and the sound will be sent to JACK audio.</li>
<li>Synthesize the phonetic string to file:<br>Click on "Synthesize to file" and the sound will be sent to a WAVE file.</li>
<li>Unselect a parameter:<br>Uncheck a checkbox in the Parameters list.</li>
<li>Select a parameter:<br>Check a checkbox in the Parameters list.
 The parameter is added at the bottom of the graph.</li>
<li>Adjust the zoom in the graph:<br>Set the x and y zoom controls, entering the value, using the mouse wheel
 or clicking on the up/down arrows.</li>
<li>Reset the zoom:<br>Double-click on the graph.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="inton_window">Intonation window</h2>

<p><img class="screenshot" src="img/gama_tts_editor-intonation_window.png"
	alt="Screenshot of the intonation window"></p>

<p>This window shows the generated macro intonation, and allows the customization of the curve.
The curve is shown only after a text is synthesized in the Synthesis window.
</p>

<p>The graph shows the pitch before it is added to
<code>(vtm_control_model.config:pitch_offset + voice_*.config:reference_glottal_pitch).</code>
</p>

<p>At the top of the graph, the Rule numbers are shown, and below them the Rule duration in milliseconds.
</p>

<p>The fields "Beat" and "Absolute time" are read-only. The absolute time is the sum of the beat and
beat offset values.
</p>

<p>The beat positions are indicated by vertical black lines.
</p>

<p>The graph shows the cubic interpolation curve and also the linear interpolation one.
The first segment uses always linear interpolation, even with smooth intonation enabled.
</p>

<p>Operations:</p>
<ul>
<li>Select an intonation point:<br>Click on the graph near the target point.</li>
<li>Move point to the previous/next Rule:<br>Press <kbd>LEFT</kbd>/<kbd>RIGHT</kbd>.</li>
<li>Increase/decrease point value by 1 semitone:<br>Press <kbd>UP</kbd>/<kbd>DOWN</kbd>.</li>
<li>Change the point value:<br>Enter the value and press <kbd>ENTER</kbd>.</li>
<li>Change the point slope:<br>Enter the slope and press <kbd>ENTER</kbd>.</li>
<li>Change the beat offset:<br>Enter the beat offset and press <kbd>ENTER</kbd>.</li>
<li>Synthesize to audio:<br>Click on "Synthesize" and the sound will be sent to JACK audio.</li>
<li>Synthesize to file:<br>Click on "Synthesize to file" and the sound will be sent to a WAVE file.</li>
</ul>

<hr>
<!-- ======================================================================= -->
<h2 id="param_modif">Parameter modification</h2>

<p><img class="screenshot" src="img/gama_tts_editor-parameter_modification.png"
	alt="Screenshot of the parameter modification window"></p>

<p>In this window the vocal tract parameters can be modified in real time.
</p>

<p>The parameter that will be modified can be selected in the combo box at the
top.
</p>

<p>The modification can be set to "Add" or "Multiply".
When set to "Add", the modification value will be added to the parameter value.
When set to "Multiply", the parameter value will be multiplied by the
modification value.
</p>

<p>If the amplitude field is set to a value V, and the modification is set to
"Add", the modification will have a value between -V and V.
When the modification is set to "Multiply", the amplitude is always 1.0 and
the modification will have a value between 0.0 and 2.0 (the center in the
input area have a value of 1.0).
</p>

<p>Automatic gain normalization is not executed.
For this reason, an attenuation can be set in the output gain combo box
(to avoid saturation).
</p>

<p>In the input area, only the horizontal (x) position of the mouse cursor is
captured.
</p>

<p>In the parameter curve graph, the original parameter curve is shown in black,
and the modified curve is shown in blue.
</p>

<p>Operations:</p>
<ul>
<li>Modify a parameter:<br>Click on the input area, near the central line, and
  the synthesis will start. Move the mouse to the left or to the right, and
  hear the sound of the modified speech in real time.
  The synthesis will stop at the end of the parameter data.</li>
<li>Reset a parameter:<br>Click on the button "Reset parameter".</li>
<li>Synthesize to audio:<br>Click on "Synthesize" and the sound will be sent to JACK audio, using the modified parameters.</li>
<li>Synthesize to file:<br>Click on "Synthesize to file" and the sound will be sent to a WAVE file, using the modified parameters.
  If the option "Save VTM parameters to file" is set, the modified parameters will be saved to a file.</li>
</ul>

</div>

	<div id="footer">This documentation is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
<br>
Last update: 2017-09-08
</div>

</div>

</body>
</html>
